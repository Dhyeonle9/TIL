팁!
설치된 라이브러리 -> requirements.txt
$ pip freeze >> requirements.txt
% requirements.txt 읽고 다 설치해줘
$ pip install -r requirements.txt

# 유저, 게시물, 댓글 관계
user -|-<- post -|-<- comment
user.post_set   post.comment_set
post.user_id    comment.post_id

# 좋아요 기능 
M-N 관계
어떻게?
![Alt text](image-1.png)
article에 좋아하는 사람들을 다 저장하는 방식은 SQL에서 지원하지 않음

새로운 테이블을 만듬!
![Alt text](image-2.png)
user-article테이블
user와 article M-N 관계를 설정해주기 위해
user_id와 article_id를 같이 저장함
M:N을 관리하기위해서는 중간 모델이 필요함
user:user-article
1   :   N
article:user-article
1      :    N
M:N은 1:N 두개의 집합이다

django의 relation field 이용
1:N - ForeignKey
M:N - ManyToManyField

like_users = models.ManyToManyField(settings.AUTH_USER_MODEL, related_name='like_posts')
`like_users = models.ManyToManyField(settings.AUTH_USER_MODEL)`
했을때 Reverse accesor 를 자동으로 만드는데 
user.post_set() 이 있기때문에 중복오류 뜸
`related_name='like_posts'` 자동으로 생성되는 역참조의 이름을 바꿔줌

views.py
```python
def likes(request, id):
    user = request.user
    post = Post.objects.get(id=id)
    `post.like_users.add(user)` add 이용
    post.save()
 ```
```python
@login_required
def likes(request, id):
    user = request.user
    post = Post.objects.get(id=id)
    # 이미 좋아요 버튼을 누른경우 취소
    if post in user.like_posts.all():
    # if user in post.like_users.all()
        post.like_users.remove(user)
    else:
        post.like_users.add(user)
        # == user.like_posts.add(post)

    return redirect('posts:index')
```

follow 기능!
단방향
    followings = models.ManyToManyField('self', related_name='followers', `symmetrical=False`)
    # followers 
    1-> 2
    2->1 
    은 다른 데이터임 

views.py
```python
def follows(request, username):
    me = request.user
    you = User.objects.get(username=username)

    # 이미 팔로잉이 되어있는경우
    if you in me.followings.all():
        me.followings.remove(you)   
    # 팔로잉이 되어있지 않은 경우
    else:
        me.followings.add(you)
```

# 오류수정
터미널창에서 관리자계정을 만들때
이미지를 넣지 않음!
create할때 profile_image값이 없어 오류가 발생
